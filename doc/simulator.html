
<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    
    <meta name="docsearch:name" content="stormpy" />
    <meta name="docsearch:package_type" content="" />
    <meta name="docsearch:release" content="1.11.0" />
    <meta name="docsearch:version" content="" />
    
      <meta name="theme-color" content="#0D6EFD" />
    
    
      <title>Working with Simulators &mdash; stormpy 1.11.0 documentation</title>
    
    <link rel="canonical" href="doc/simulator" />
      <link rel="icon" href="../_static/favicon.png" />
          <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8e8a900e" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/sphinx-nefertiti-blue.min.css?v=6eb1378b" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/fonts/nunito/stylesheet.css?v=abf98f06" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/fonts/ubuntu-sans-mono/stylesheet.css?v=8616a587" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/pygments-dark.css?v=f21207c5" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/pygments-light.css?v=6c104457" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/bootstrap-icons.min.css?v=44730005" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" /><!-- add (1) -->
          <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=eab7d231" /><!-- add (1) -->
        <link rel="index" title="Index" href="../genindex.html" />
        <link rel="search" title="Search" href="../search.html" />
        <link rel="top" title="stormpy 1.11.0 documentation" href="#" />
        <link rel="up" title="Advanced Examples" href="../advanced_topics.html" />
        <link rel="next" title="Reward Models" href="reward_models.html" />
        <link rel="prev" title="Exploring Models" href="exploration.html" />
    <style>
      :root {
        --nftt-body-font-family: "Nunito", var(--nftt-font-sans-serif) !important;
        --nftt-font-monospace: "Ubuntu Sans Mono", var(--nftt-font-family-monospace) !important;
        --nftt-project-name-font: var(--nftt-body-font-family);
        --nftt-documentation-font: var(--nftt-body-font-family);
        --nftt-doc-headers-font: "Georgia", var(--nftt-documentation-font);}

      h1 *,
      h2 *,
      h3 *,
      h4 *,
      h5 *,
      h6 * {
        font-size: inherit;
      }

      .light pre,
      .dark pre {
        line-height: var(--nftt-pre-line-height, 140%);
      }
    </style>
  </head>
  <body>
    <div id="back-to-top-container" class="position-fixed start-50 translate-middle-x">
      <button id="back-to-top" type="button" class="d-none btn btn-neutral btn-sm shadow px-4" data-bs-toggle="button">Back to top</button>
    </div>
    <header id="snftt-nav-bar" class="navbar navbar-expand-xl navbar-dark nftt-navbar flex-column fixed-top">
      <div class="skip-links container-fluid visually-hidden-focusable overflow-hidden justify-content-start flex-grow-1">
        <div class="border-bottom mb-2 pb-2 w-100">
          <a class="d-none d-md-inline-flex p-2 m-1" href="#sidebar-filter">Skip to index filter</a>
          <a class="d-inline-flex p-2 m-1" href="#content">Skip to main content</a>
        </div>
      </div>
      <nav class="container-xxl nftt-gutter flex-nowrap" aria-label="Main navigation">
        <div class="nftt-navbar-toggler">
          <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar" aria-label="Toggle documentation navigation">
            <i class="bi bi-list"></i>
          </button>
        </div>
          <a
            href="../index.html"
            class="navbar-brand"
          >
            <img src="../_static/storm_logo.png" width="36" height="36" alt="Storm logo"
              class="project-logo"
            />
            <span class="brand-text">stormpy</span><span class="brand-short-text">stormpy</span>
          </a>
        
        
          <ul class="nftt-header-links-large navbar-nav">
          
            
            
            
            
  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="../getting_started.html" data-snftt-hl-id="1" >Getting Started</a>
    </li>
  

  
    <li class="nav-item dropdown">
      <a class="snftt-hl nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" href="#" data-snftt-hl-id="2" data-snftt-hl-regexps="doc/*">Documentation</a>
      <ul class="dropdown-menu">
        
          
          
          
          
  
    <li >
      <a class="snftt-hl dropdown-item" href="../advanced_topics.html" data-snftt-hl-id="3" >Advanced Examples</a>
    </li>
  

  
    <li><hr class="dropdown-divider"></li>
  

        
      </ul>
    </li>
  

  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="../api.html" data-snftt-hl-id="4" data-snftt-hl-id="" data-snftt-hl-regexps="api/*">API</a>
    </li>
  

  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="https://www.stormchecker.org/" data-snftt-hl-id="5" >Storm</a>
    </li>
  

          
          </ul>
        
        <div class="d-flex d-xl-none">
          <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#nfttSearch" aria-controls="nfttSearch" aria-label="Search">
            <i class="bi bi-search"></i>
          </button>
          <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#nfttNavbar" aria-controls="nfttNavbar" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
        </div>
        
<div class="offcanvas-xl offcanvas-end flex-grow-1" tabindex="-1" id="nfttSearch" aria-labelledby="nfttSearchOffcanvasLabel" data-bs-scroll="true">
  <div class="offcanvas-header px-4 pb-0">
    <h5 class="offcanvas-title fw-bold" id="nfttSearchOffcanvasLabel">Search the documentation</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#nfttSearch"></button>
  </div>
  <div class="offcanvas-body p-4 pt-0 p-xl-0 ps-xl-4">
    <hr class="d-xl-none text-white-50">
    <ul class="navbar-nav flex-row align-items-center flex-wrap ms-md-auto">
      <li class="nav-item col-12 col-xl-auto">
        <form id="nftt-search-form" action="../search.html" method="get">
          <div class="input-group">
            <input type="text" name="q" class="form-control search-input" placeholder="Search" aria-label="Search" aria-describedby="button-search">
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <button class="btn btn-primary" type="submit" id="button-search" aria-label="Search"><i class="bi bi-search"></i></button>
          </div>
        </form>
      </li>
    </ul>
  </div>
</div>

        <div class="offcanvas-xl offcanvas-end" tabindex="-1" id="nfttNavbar" aria-labelledby="nfttNavbarOffcanvasLabel" data-bs-scroll="true">
          <div class="offcanvas-header px-4 pb-0">
            <div class="offcanvas-title navbar-brand" id="nfttNavbarOffcanvasLabel"><span class="brand-short-text">stormpy</span></div>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#nfttNavbar"></button>
          </div>
          <div class="offcanvas-body p-4 pt-0 p-xl-0 px-xl-3">
            <hr class="d-xl-none text-white-50">
            <ul class="navbar-nav flex-row align-items-center flex-wrap ms-lg-auto">
              
                <div class="nftt-header-links-small">
                  
                    
                    
                    
                    <div class="d-inline-block">
                      
  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="../getting_started.html" data-snftt-hl-id="1" >Getting Started</a>
    </li>
  

  
    <li class="nav-item dropdown">
      <a class="snftt-hl nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" href="#" data-snftt-hl-id="2" data-snftt-hl-regexps="doc/*">Documentation</a>
      <ul class="dropdown-menu">
        
          
          
          
          
  
    <li >
      <a class="snftt-hl dropdown-item" href="../advanced_topics.html" data-snftt-hl-id="3" >Advanced Examples</a>
    </li>
  

  
    <li><hr class="dropdown-divider"></li>
  

        
      </ul>
    </li>
  

  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="../api.html" data-snftt-hl-id="4" data-snftt-hl-id="" data-snftt-hl-regexps="api/*">API</a>
    </li>
  

  
    <li class="nav-item">
      <a class="snftt-hl nav-link" href="https://www.stormchecker.org/" data-snftt-hl-id="5" >Storm</a>
    </li>
  

                    </div>
                  
                  <li class="nav-item col-12 col-xl-auto h-100" aria-hidden="true">
                    <div class="vr d-none d-xl-flex h-100 mx-xl-2 text-white-50"></div>
                    <hr class="d-xl-none text-white-50">
                  </li>
                </div>
              
              
              <li class="nav-item col-12 col-xl-auto">
                <a class="nav-link py-2 py-xl-0 px-0 px-xl-2" href="https://github.com/moves-rwth/stormpy" target="_blank" rel="noopener">
                  <div class="d-flex align-items-center">
                    <div class="me-2">
                      <i class="bi bi-git size-24"></i>
                    </div>
                    <div class="repo d-flex flex-column align-items-center" data-snftt-repo-url="https://github.com/moves-rwth/stormpy">
                      stormpy
                      <div class="d-flex justify-content-center" data-snftt-repo-metrics>
                        <span class="pe-2 d-flex justify-content-center align-items-center">
                          <i class="bi bi-tag size-14"></i>
                          <span class="repo-metric" data-snftt-repo-tag></span>
                        </span>
                        <span class="pe-2 d-flex justify-content-center align-items-center">
                          <i class="bi bi-star size-14"></i>
                          <span class="repo-metric" data-snftt-repo-stars></span>
                        </span>
                        <span class="d-flex justify-content-center align-items-center">
                          <i class="bi bi-diagram-2 size-14"></i>
                          <span class="repo-metric" data-snftt-repo-forks></span>
                        </span>
                      </div>
                    </div>
                  </div>
                </a>
              </li>
              <li class="nav-item col-12 col-xl-auto h-100" aria-hidden="true">
                <div class="vr d-none d-xl-flex h-100 mx-xl-2 text-white-50"></div>
                <hr class="d-xl-none text-white-50">
              </li>
              
              
              
              
              <!-- lightdark-dropdown.html -->
<li class="nav-item dropdown">
  <a class="nav-link d-flex py-2 px-0 px-xl-2 dropdown-toggle align-items-center" id="snftt-luz" href="#" data-bs-toggle="dropdown" data-bs-display="static" aria-expanded="false" aria-label="Change appearance">
    <i class="bi bi-circle-half" data-snftt-luz-icon-active></i>
    <span id="snftt-luz-text" class="d-xl-none ms-2">Change appearance</span>
  </a>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="snftt-luz-text">
    <li>
      <h6 class="dropdown-header">Change appearance</h6>
    </li>
    <li>
      <a class="dropdown-item d-flex align-items-center" data-snftt-luz="light" href="#" aria-pressed="false">
        <span>
          <i class="bi bi-sun" data-snftt-luz-icon="light"></i>
        </span>
        <span class="ms-3">Light</span>
        <i class="bi bi-check ms-auto"></i>
      </a>
    </li>
    <li>
      <a class="dropdown-item d-flex align-items-center" data-snftt-luz="dark" href="#" aria-pressed="false">
        <span>
          <i class="bi bi-moon-stars" data-snftt-luz-icon="dark"></i>
        </span>
        <span class="ms-3">Dark</span>
        <i class="bi bi-check ms-auto"></i>
      </a>
    </li>
    <li>
      <a class="dropdown-item current d-flex align-items-center" data-snftt-luz="default" href="#" aria-pressed="false">
        <span>
          <i class="bi bi-circle-half" data-snftt-luz-icon="default"></i>
        </span>
        <span class="ms-3">Automatic</span>
        <i class="bi bi-check ms-auto"></i>
      </a>
    </li>
  </ul>
</li>
            </ul>
          </div>
        </div>
      </nav>
      
    </header>

    <div class="container-fluid flex-grow-1">
      <div class="nftt-gutter nftt-page">
        <aside class="nftt-sidebar ">
          <div class="nftt-sidebar-content">
            
            <div class="title d-none d-xl-block">
              <i class="bi bi-book"></i>&nbsp;&nbsp;<span>Index</span>
            </div>
            <div id="sidebar" tabindex="-1" class="offcanvas-xl offcanvas-start" aria-labelledby="nfttSidebarOffcanvasLabel">
                <!-- sidebartemplate: "globaltoc.html" --><div class="offcanvas-header border-bottom">
  <h5 class="offcanvas-title fw-bold" id="nfttSidebarOffcanvasLabel">
    Index
  </h5>
  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#sidebar"></button>
</div>

<div class="offcanvas-body">
  <nav class="toc" aria-label="Main menu">
    <div class="mb-3 p-1 pt-3 pb-4 border-bottom">
      <input id="sidebar-filter" type="text" name="filter" class="form-control form-control-sm" placeholder="index filter" aria-label="index filter">
    </div>
    <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../advanced_topics.html">Advanced Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="building_models.html">Building Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/building_dtmcs.html">Discrete-time Markov chains (DTMCs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/building_mdps.html">Markov decision processes (MDPs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/building_ctmcs.html">Continuous-time Markov chains (CTMCs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="models/building_mas.html">Markov automata (MAs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="engines.html">Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="exploration.html">Exploring Models</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="reward_models.html">Reward Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="schedulers.html">Working with Schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="shortest_paths.html">Working with Shortest Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="parametric_models.html">Parametric Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="dfts.html">Dynamic Fault Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="gspns.html">Generalized Stochastic Petri Nets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using_pycarl.html">Getting Started with Pycarl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/core.html">Stormpy.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/info.html">Stormpy.info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/exceptions.html">Stormpy.exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/logic.html">Stormpy.logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/storage.html">Stormpy.storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/utility.html">Stormpy.utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/dft.html">Stormpy.dft</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/gspn.html">Stormpy.gspn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pars.html">Stormpy.pars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pomdp.html">Stormpy.pomdp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pycarl/core.html">Pycarl core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pycarl/convert.html">Pycarl convert</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pycarl/formula.html">Pycarl formula</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pycarl/parse.html">Pycarl parse</a></li>
</ul>

  </nav>
  <template data-toggle-item-template>
    <button class="btn btn-sm btn-link toctree-expand" type="button">
      <i class="bi bi-caret-right"></i>
      <span class="visually-hidden">Toggle menu contents</span>
    </button>
  </template>
</div>
            </div>
            
          </div>
        </aside>
        <article id="content" class="nftt-content" role="main">
          <nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="../index.html">Start</a></li>
      <li class="breadcrumb-item"><a href="../advanced_topics.html">Advanced Examples</a></li>
    <li class="breadcrumb-item active" aria-current="page">Working with Simulators</li>
  </ol>
</nav>
    <div class="admonition note">
  Try online: <span><a href="https://mybinder.org/v2/gh/moves-rwth/stormpy/master?filepath=notebooks/doc/simulator.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="margin-bottom: 0rem"></a></span>
</div><section id="Working-with-Simulators">
<h1>Working with Simulators<a class="headerlink" href="#Working-with-Simulators" title="Link to this heading">¶</a></h1>
<p>The simulators in stormpy are meant to mimic access to unknown models, but they can also be used to explore the model.</p>
<p>All simulators implement the abstract class <code class="docutils literal notranslate"><span class="pre">stormpy.simulator.Simulator</span></code>.</p>
<p>The simulators differ in the model representation they use in the background and in the representation of the states and actions exposed to the user. We will go through some options by example!</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">stormpy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stormpy.examples</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stormpy.examples.files</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stormpy.simulator</span>
</pre></div>
</div>
</div>
<section id="Model-based-simulation">
<h2>Model-based simulation<a class="headerlink" href="#Model-based-simulation" title="Link to this heading">¶</a></h2>
<p>We first start with an explicit model-based simulation. This means that we have a model of the DTMC in memory. This is fast and convenient if the model is available, but limits the size of models that we support.</p>
<section id="DTMCs">
<h3>DTMCs<a class="headerlink" href="#DTMCs" title="Link to this heading">¶</a></h3>
<p>We first discuss the interface for DTMCs, without any nondeterminism.</p>
<section id="Explicit-state-representations">
<h4>Explicit state-representations<a class="headerlink" href="#Explicit-state-representations" title="Link to this heading">¶</a></h4>
<p>After importing some parts of stormpy as above, we start with creating a model, in this case a DTMC:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">prism_dtmc_die</span>
<span class="n">prism_program</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">parse_prism_program</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">build_model</span><span class="p">(</span><span class="n">prism_program</span><span class="p">)</span>

<span class="n">simulator</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">create_simulator</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Let us simulate a path.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(0, [0.0], {&#39;init&#39;})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(2, [1.0], set())
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(5, [1.0], set())
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(11, [1.0], {&#39;done&#39;, &#39;five&#39;})
</pre></div></div>
</div>
<p>We start the simulator by restarting. We then do 3 steps. Every step returns a triple (state, reward, labels). In particular, the simulation above reflects a path s0, s2, s5, s11. Taking the transitions inbetween yields the reward as shown above. While states s2 and s5 are not labelled, state s0 is labelled with <code class="docutils literal notranslate"><span class="pre">init</span></code> and state s11 is labelled with <code class="docutils literal notranslate"><span class="pre">done</span></code> and <code class="docutils literal notranslate"><span class="pre">five</span></code>. Indeed we can check this information on the model that we used for the simulator:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">labeling</span><span class="o">.</span><span class="n">get_labels_of_state</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;done&#39;, &#39;five&#39;}
</pre></div></div>
</div>
<p>We can continue sampling.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(11, [0.0], {&#39;done&#39;, &#39;five&#39;})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(11, [0.0], {&#39;done&#39;, &#39;five&#39;})
</pre></div></div>
</div>
<p>Indeed, we are not leaving the state. In this case, we can never leave the state as state s11 is absorbing. The simulator detects and exposes this information via <code class="docutils literal notranslate"><span class="pre">simulator.is_done()</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>We can sample more paths, yielding (potentially) different final states:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
<span class="n">final_outcomes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
        <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">observation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">final_outcomes</span><span class="p">:</span>
        <span class="n">final_outcomes</span><span class="p">[</span><span class="n">observation</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">final_outcomes</span><span class="p">[</span><span class="n">observation</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
<span class="n">final_outcomes</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{7: 21, 9: 16, 10: 18, 11: 17, 12: 16, 8: 12}
</pre></div></div>
</div>
</section>
<section id="Program-level-representations">
<h4>Program-level representations<a class="headerlink" href="#Program-level-representations" title="Link to this heading">¶</a></h4>
<p>We can run the same simulator but represent states symbolically, referring to the high-level description of the state rather than on its internal index. The advantage of this is that the process becomes independent of the underlying representation of the model. We first need to build the model with the required annotations.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">BuilderOptions</span><span class="p">()</span>
<span class="n">options</span><span class="o">.</span><span class="n">set_build_state_valuations</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">build_sparse_model_with_options</span><span class="p">(</span><span class="n">prism_program</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Then, we create simulator that uses program-level state observations.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">create_simulator</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">set_observation_mode</span><span class="p">(</span><span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">SimulatorObservationMode</span><span class="o">.</span><span class="n">PROGRAM_LEVEL</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
<span class="nb">str</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;{\n    &#34;d&#34;: 0,\n    &#34;s&#34;: 0\n}&#39;
</pre></div></div>
</div>
<p>Indeed, the state is now an object that describes the state in terms of the variables of prism program, in this case variables “s” and “d”.</p>
<p>We can use the simulator as before, e.g.,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
<span class="n">final_outcomes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">simulator</span><span class="o">.</span><span class="n">get_reward_names</span><span class="p">())</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
        <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">observation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">final_outcomes</span><span class="p">:</span>
        <span class="n">final_outcomes</span><span class="p">[</span><span class="n">observation</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">final_outcomes</span><span class="p">[</span><span class="n">observation</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">final_outcomes</span><span class="o">.</span><span class="n">items</span><span class="p">()]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;coin_flips&#39;]
{
    &#34;d&#34;: 5,
    &#34;s&#34;: 7
}: 18, {
    &#34;d&#34;: 4,
    &#34;s&#34;: 7
}: 19, {
    &#34;d&#34;: 2,
    &#34;s&#34;: 7
}: 13, {
    &#34;d&#34;: 6,
    &#34;s&#34;: 7
}: 16, {
    &#34;d&#34;: 3,
    &#34;s&#34;: 7
}: 14, {
    &#34;d&#34;: 1,
    &#34;s&#34;: 7
}: 20
</pre></div></div>
</div>
</section>
</section>
<section id="MDPs">
<h3>MDPs<a class="headerlink" href="#MDPs" title="Link to this heading">¶</a></h3>
<section id="Explicit-representations">
<h4>Explicit representations<a class="headerlink" href="#Explicit-representations" title="Link to this heading">¶</a></h4>
<p>As above, we can represent states both explicitly or symbolically. We only discuss the explicit representation here. With nondeterminism, we now must resolve this nondeterminism externally. That is, the step argument now takes an argument, which we may pick randomly or in a more intelligent manner.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">prism_mdp_slipgrid</span>
<span class="n">prism_program</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">parse_prism_program</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">build_model</span><span class="p">(</span><span class="n">prism_program</span><span class="p">)</span>
<span class="n">simulator</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">create_simulator</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="c1"># 3 paths of at most 20 steps.</span>
<span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">available_actions</span><span class="p">()</span>
        <span class="n">select_action</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--act=</span><span class="si">{</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">]</span><span class="si">}</span><span class="s2">--&gt;&quot;</span><span class="p">)</span>
        <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">])</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
            <span class="k">break</span>
    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;------&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0 --act=1--&gt; 2 --act=0--&gt; 2 --act=0--&gt; 4 --act=2--&gt; 1 --act=1--&gt; 3 --act=1--&gt; 3 --act=2--&gt; 7 --act=2--&gt; 3 --act=0--&gt; 1 --act=2--&gt; 4 --act=1--&gt; 4 --act=2--&gt; 4 --act=3--&gt; 8 --act=0--&gt; 5 --act=0--&gt; 8 --act=3--&gt; 12 --act=0--&gt; 12 --act=0--&gt; 9 --act=0--&gt; 9 --act=1--&gt; 5
------
0 --act=1--&gt; 0 --act=0--&gt; 0 --act=1--&gt; 2 --act=1--&gt; 0 --act=0--&gt; 0 --act=0--&gt; 1 --act=0--&gt; 0 --act=1--&gt; 2 --act=2--&gt; 5 --act=0--&gt; 8 --act=1--&gt; 11 --act=2--&gt; 7 --act=2--&gt; 3 --act=2--&gt; 7 --act=2--&gt; 3 --act=2--&gt; 3 --act=1--&gt; 3 --act=2--&gt; 3 --act=0--&gt; 1 --act=1--&gt; 3
------
0 --act=0--&gt; 1 --act=2--&gt; 4 --act=3--&gt; 4 --act=3--&gt; 4 --act=1--&gt; 4 --act=1--&gt; 7 --act=1--&gt; 10 --act=2--&gt; 10 --act=1--&gt; 6 --act=0--&gt; 3 --act=2--&gt; 7 --act=0--&gt; 4 --act=0--&gt; 2 --act=0--&gt; 4 --act=3--&gt; 8 --act=0--&gt; 5 --act=2--&gt; 9 --act=1--&gt; 5 --act=2--&gt; 9 --act=1--&gt; 9
------
</pre></div></div>
</div>
<p>In the example above, the actions are internal numbers. Often, a program gives semantically meaningful names, such as moving <code class="docutils literal notranslate"><span class="pre">north</span></code>, <code class="docutils literal notranslate"><span class="pre">east</span></code>, <code class="docutils literal notranslate"><span class="pre">west</span></code> and <code class="docutils literal notranslate"><span class="pre">south</span></code> in a grid with program variables reflecting the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> location.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">BuilderOptions</span><span class="p">()</span>
<span class="n">options</span><span class="o">.</span><span class="n">set_build_choice_labels</span><span class="p">()</span>
<span class="n">options</span><span class="o">.</span><span class="n">set_build_state_valuations</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">build_sparse_model_with_options</span><span class="p">(</span><span class="n">prism_program</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
<span class="n">simulator</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">create_simulator</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">set_action_mode</span><span class="p">(</span><span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">SimulatorActionMode</span><span class="o">.</span><span class="n">GLOBAL_NAMES</span><span class="p">)</span>
<span class="n">simulator</span><span class="o">.</span><span class="n">set_observation_mode</span><span class="p">(</span><span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">SimulatorObservationMode</span><span class="o">.</span><span class="n">PROGRAM_LEVEL</span><span class="p">)</span>
<span class="c1"># 3 paths of at most 20 steps.</span>
<span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">available_actions</span><span class="p">()</span>
        <span class="n">select_action</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">]</span><span class="si">}</span><span class="s2">--&gt;&quot;</span><span class="p">)</span>
        <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">])</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
            <span class="k">break</span>
    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1,1) --west--&gt; (1,2) --south--&gt; (1,2) --east--&gt; (1,2) --east--&gt; (1,1) --west--&gt; (1,2) --east--&gt; (1,1) --south--&gt; (2,1) --south--&gt; (2,1) --north--&gt; (1,1) --south--&gt; (2,1) --west--&gt; (2,1) --north--&gt; (2,1) --west--&gt; (2,2) --west--&gt; (2,2) --south--&gt; (3,2) --east--&gt; (3,2) --south--&gt; (4,2) --west--&gt; (4,2) --west--&gt; (4,2) --north--&gt; (3,2)
(1,1) --west--&gt; (1,1) --south--&gt; (1,1) --west--&gt; (1,2) --south--&gt; (1,2) --south--&gt; (1,2) --west--&gt; (1,3) --east--&gt; (1,2) --east--&gt; (1,2) --south--&gt; (2,2) --south--&gt; (3,2) --south--&gt; (4,2) --west--&gt; (4,3) --north--&gt; (3,3) --south--&gt; (4,3) --west--&gt; (4,4) --north--&gt; (3,4) --east--&gt; (3,3) --west--&gt; (3,3) --north--&gt; (2,3) --east--&gt; (2,3)
(1,1) --south--&gt; (2,1) --south--&gt; (3,1) --south--&gt; (3,1) --north--&gt; (2,1) --north--&gt; (1,1) --south--&gt; (2,1) --south--&gt; (3,1) --south--&gt; (3,1) --west--&gt; (3,2) --south--&gt; (3,2) --west--&gt; (3,3) --east--&gt; (3,2) --south--&gt; (3,2) --north--&gt; (3,2) --north--&gt; (3,2) --south--&gt; (3,2) --south--&gt; (4,2) --east--&gt; (4,1) --north--&gt; (4,1) --west--&gt; (4,2)
</pre></div></div>
</div>
</section>
</section>
</section>
<section id="Program-level-simulator">
<h2>Program-level simulator<a class="headerlink" href="#Program-level-simulator" title="Link to this heading">¶</a></h2>
<p>We can also use a program-level simulator, which does not require putting the model into memory.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simulator</span> <span class="o">=</span> <span class="n">stormpy</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">create_simulator</span><span class="p">(</span><span class="n">prism_program</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3 paths of at most 20 steps.</span>
<span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">available_actions</span><span class="p">()</span>
        <span class="n">select_action</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">]</span><span class="si">}</span><span class="s2">--&gt;&quot;</span><span class="p">)</span>
        <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">simulator</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">select_action</span><span class="p">])</span>
        <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">simulator</span><span class="o">.</span><span class="n">is_done</span><span class="p">():</span>
            <span class="k">break</span>
    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1,1) --0--&gt; (2,1) --0--&gt; (1,1) --1--&gt; (1,2) --1--&gt; (1,1) --1--&gt; (1,2) --0--&gt; (2,2) --3--&gt; (2,3) --0--&gt; (1,3) --2--&gt; (1,3) --2--&gt; (1,4) --0--&gt; (2,4) --2--&gt; (2,3) --2--&gt; (2,2) --3--&gt; (2,2) --3--&gt; (2,3) --2--&gt; (2,2) --0--&gt; (2,2) --2--&gt; (2,2) --0--&gt; (1,2) --0--&gt; (2,2)
(1,1) --0--&gt; (2,1) --1--&gt; (2,1) --2--&gt; (2,2) --3--&gt; (2,2) --1--&gt; (2,2) --1--&gt; (3,2) --0--&gt; (2,2) --2--&gt; (2,1) --2--&gt; (2,2) --0--&gt; (2,2) --1--&gt; (3,2) --3--&gt; (3,3) --3--&gt; (3,3) --2--&gt; (3,2) --0--&gt; (2,2) --2--&gt; (2,2) --3--&gt; (2,2) --0--&gt; (1,2) --0--&gt; (2,2) --3--&gt; (2,3)
(1,1) --0--&gt; (2,1) --2--&gt; (2,2) --0--&gt; (1,2) --0--&gt; (2,2) --3--&gt; (2,2) --3--&gt; (2,3) --0--&gt; (1,3) --1--&gt; (1,3) --2--&gt; (1,4) --1--&gt; (1,4) --1--&gt; (1,3) --2--&gt; (1,4) --0--&gt; (2,4) --2--&gt; (2,3) --2--&gt; (2,2) --2--&gt; (2,2) --0--&gt; (1,2) --0--&gt; (2,2) --0--&gt; (2,2) --3--&gt; (2,3)
</pre></div></div>
</div>
</section>
</section>

</article>
        <aside class="nftt-toc my-3">
          
          <div class="my-sm-1 my-lg-0 ps-xl-3 text-muted">
            <button class="btn btn-link p-lg-0 mb-2 mb-lg-0 text-decoration-none nftt-toc-toggle d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#tocContents" aria-expanded="false" aria-controls="tocContents"
            >On this page <i class="ms-2 bi bi-chevron-expand"></i></button>
            <div class="title d-none d-lg-block">
              <i class="bi bi-file-earmark-text"></i>&nbsp;&nbsp;<span class="small">On this page</span>
            </div>
            <div class="collapse nftt-toc-collapse" id="tocContents">
              <nav id="TableOfContents">
                <ul>
<li><a class="reference internal" href="#">Working with Simulators</a><ul>
<li><a class="reference internal" href="#Model-based-simulation">Model-based simulation</a><ul>
<li><a class="reference internal" href="#DTMCs">DTMCs</a><ul>
<li><a class="reference internal" href="#Explicit-state-representations">Explicit state-representations</a></li>
<li><a class="reference internal" href="#Program-level-representations">Program-level representations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#MDPs">MDPs</a><ul>
<li><a class="reference internal" href="#Explicit-representations">Explicit representations</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#Program-level-simulator">Program-level simulator</a></li>
</ul>
</li>
</ul>

              </nav>
            </div>
          </div>
          
        </aside>
      </div>
    </div>

    <footer class="nftt-footer">
      <nav id="paginator" class="py-4" aria-label="Documentation navigation">
    <div class="container">
      <ul class="pagination justify-content-between mb-0"><li class="d-flex page-item">
            <a href="exploration.html" class="d-flex px-5 align-items-end" rel="prev" aria-label="Previous page: Exploring Models">
              <span class="prev-page"><i class="bi bi-caret-left"></i></span>
              <div class="d-none d-sm-flex flex-column">
                <span class="text-small text-start text-muted">Previous</span>
                <span class="underline">Exploring Models</span>
              </div>
            </a>
          </li>
        <li class="d-flex page-item ms-auto">
            <a href="reward_models.html" class="d-flex px-5 align-items-end" rel="next" aria-label="Next page: Reward Models">
              <div class="d-flex flex-column">
                <span class="text-small text-end text-start text-muted">Next</span>
                <span class="underline">Reward Models</span>
              </div>
              <span class="next-page"><i class="bi bi-caret-right"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
  </nav>

      <div class="py-5 px-4 px-md-3">
  <div class="container">
    
    <div class="row">
      <ul id="nftt-footer-links" class="list-unstyled list-separator col-lg-12 pb-2 text-center">
        
          <li class="d-inline">
            <a href="https://moves-rwth.github.io/stormpy/" class="list-item">Documentation</a>
          </li>
        
          <li class="d-inline">
            <a href="https://pypi.org/project/stormpy/" class="list-item">Package</a>
          </li>
        
          <li class="d-inline">
            <a href="https://github.com/moves-rwth/stormpy/" class="list-item">Repository</a>
          </li>
        
          <li class="d-inline">
            <a href="https://github.com/moves-rwth/stormpy/issues" class="list-item">Issues</a>
          </li>
        
      </ul>
    </div>
    

    <div class="row">
      <div class="col-lg-12 text-center">
        <a class="brand-text d-inline-flex align-items-center mb-2 text-decoration-none" href="/" aria-label="stormpy">
          <span class="fs-6 fw-bold">stormpy</span>
        </a>
        
          <ul class="list-unstyled small text-muted">
            <li>2016-2025 Storm Developers</li>
          </ul>
        
        
        <div class="built-with pt-2">
          Built with <a href="http://sphinx-doc.org">Sphinx 8.2.3</a> and <a href="https://github.com/danirus/sphinx-nefertiti">Nefertiti 0.8.6</a>
        </div>
        
      </div>
    </div>
  </div>
</div>
    </footer>
    <script src="../_static/documentation_options.js?v=6cf1fb80"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>
    <script src="../_static/docs-versions.js?v=08b0cbfb"></script>
    <script src="../_static/sphinx-nefertiti.min.js?v=cd4e68e4"></script>
    <script src="../_static/bootstrap.bundle.min.js?v=ff4e7878"></script>
  </body>
</html>